<?php

$compatibilityMatrix = [
    1 => [1 => 80, 2 => 60, 3 => 70, 4 => 50, 5 => 65, 6 => 55, 7 => 40, 8 => 70, 9 => 60, 11 => 75, 22 => 50],
    2 => [1 => 60, 2 => 85, 3 => 55, 4 => 75, 5 => 50, 6 => 70, 7 => 65, 8 => 40, 9 => 70, 11 => 60, 22 => 75],
    3 => [1 => 70, 2 => 55, 3 => 80, 4 => 60, 5 => 75, 6 => 65, 7 => 50, 8 => 55, 9 => 75, 11 => 70, 22 => 65],
    4 => [1 => 50, 2 => 75, 3 => 60, 4 => 70, 5 => 40, 6 => 80, 7 => 55, 8 => 65, 9 => 50, 11 => 60, 22 => 75],
    5 => [1 => 65, 2 => 50, 3 => 75, 4 => 40, 5 => 85, 6 => 55, 7 => 70, 8 => 60, 9 => 80, 11 => 70, 22 => 65],
    6 => [1 => 55, 2 => 70, 3 => 65, 4 => 80, 5 => 55, 6 => 75, 7 => 60, 8 => 75, 9 => 40, 11 => 60, 22 => 75],
    7 => [1 => 40, 2 => 65, 3 => 50, 4 => 55, 5 => 70, 6 => 60, 7 => 85, 8 => 50, 9 => 75, 11 => 70, 22 => 60],
    8 => [1 => 70, 2 => 40, 3 => 55, 4 => 65, 5 => 60, 6 => 75, 7 => 50, 8 => 80, 9 => 55, 11 => 65, 22 => 75],
    9 => [1 => 60, 2 => 70, 3 => 75, 4 => 50, 5 => 80, 6 => 40, 7 => 75, 8 => 55, 9 => 85, 11 => 60, 22 => 70],
    11 => [1 => 75, 2 => 60, 3 => 70, 4 => 60, 5 => 70, 6 => 60, 7 => 70, 8 => 65, 9 => 60, 11 => 80, 22 => 75],
    22 => [1 => 50, 2 => 75, 3 => 65, 4 => 75, 5 => 65, 6 => 75, 7 => 60, 8 => 75, 9 => 65, 11 => 75, 22 => 80],
];

$romanticCompatibilityMatrix = [
    1 => [1 => 75, 2 => 60, 3 => 70, 4 => 50, 5 => 65, 6 => 55, 7 => 40, 8 => 70, 9 => 60, 11 => 75, 22 => 50],
    2 => [1 => 60, 2 => 85, 3 => 55, 4 => 75, 5 => 50, 6 => 70, 7 => 65, 8 => 40, 9 => 70, 11 => 60, 22 => 75],
    3 => [1 => 70, 2 => 55, 3 => 80, 4 => 60, 5 => 75, 6 => 65, 7 => 50, 8 => 55, 9 => 75, 11 => 70, 22 => 65],
    4 => [1 => 50, 2 => 75, 3 => 60, 4 => 70, 5 => 40, 6 => 80, 7 => 55, 8 => 65, 9 => 50, 11 => 60, 22 => 75],
    5 => [1 => 65, 2 => 50, 3 => 75, 4 => 40, 5 => 85, 6 => 55, 7 => 70, 8 => 60, 9 => 80, 11 => 70, 22 => 65],
    6 => [1 => 55, 2 => 70, 3 => 65, 4 => 80, 5 => 55, 6 => 75, 7 => 60, 8 => 75, 9 => 40, 11 => 60, 22 => 75],
    7 => [1 => 40, 2 => 65, 3 => 50, 4 => 55, 5 => 70, 6 => 60, 7 => 85, 8 => 50, 9 => 75, 11 => 70, 22 => 60],
    8 => [1 => 70, 2 => 40, 3 => 55, 4 => 65, 5 => 60, 6 => 75, 7 => 50, 8 => 80, 9 => 55, 11 => 65, 22 => 75],
    9 => [1 => 60, 2 => 70, 3 => 75, 4 => 50, 5 => 80, 6 => 40, 7 => 75, 8 => 55, 9 => 85, 11 => 60, 22 => 70],
    11 => [1 => 75, 2 => 60, 3 => 70, 4 => 60, 5 => 70, 6 => 60, 7 => 70, 8 => 65, 9 => 60, 11 => 80, 22 => 75],
    22 => [1 => 50, 2 => 75, 3 => 65, 4 => 75, 5 => 65, 6 => 75, 7 => 60, 8 => 75, 9 => 65, 11 => 75, 22 => 80],
];


$friendshipCompatibilityMatrix = [
    1 => [1 => 70, 2 => 65, 3 => 60, 4 => 55, 5 => 75, 6 => 50, 7 => 45, 8 => 65, 9 => 70, 11 => 60, 22 => 70],
    2 => [1 => 65, 2 => 80, 3 => 50, 4 => 70, 5 => 55, 6 => 65, 7 => 60, 8 => 45, 9 => 65, 11 => 55, 22 => 60],
    3 => [1 => 60, 2 => 50, 3 => 75, 4 => 65, 5 => 70, 6 => 60, 7 => 55, 8 => 50, 9 => 80, 11 => 65, 22 => 55],
    4 => [1 => 55, 2 => 70, 3 => 65, 4 => 60, 5 => 45, 6 => 75, 7 => 50, 8 => 70, 9 => 55, 11 => 50, 22 => 65],
    5 => [1 => 75, 2 => 55, 3 => 70, 4 => 45, 5 => 80, 6 => 50, 7 => 65, 8 => 55, 9 => 75, 11 => 70, 22 => 50],
    6 => [1 => 50, 2 => 65, 3 => 60, 4 => 75, 5 => 50, 6 => 70, 7 => 55, 8 => 60, 9 => 45, 11 => 55, 22 => 70],
    7 => [1 => 45, 2 => 60, 3 => 55, 4 => 50, 5 => 65, 6 => 55, 7 => 85, 8 => 50, 9 => 60, 11 => 65, 22 => 55],
    8 => [1 => 65, 2 => 45, 3 => 50, 4 => 70, 5 => 55, 6 => 60, 7 => 50, 8 => 75, 9 => 50, 11 => 60, 22 => 65],
    9 => [1 => 70, 2 => 65, 3 => 80, 4 => 55, 5 => 75, 6 => 45, 7 => 60, 8 => 50, 9 => 80, 11 => 55, 22 => 60],
    11 => [1 => 60, 2 => 55, 3 => 65, 4 => 50, 5 => 70, 6 => 55, 7 => 65, 8 => 60, 9 => 55, 11 => 75, 22 => 70],
    22 => [1 => 70, 2 => 60, 3 => 55, 4 => 65, 5 => 50, 6 => 70, 7 => 55, 8 => 65, 9 => 60, 11 => 70, 22 => 80],
];


$businessCompatibilityMatrix = [
    1 => [1 => 70, 2 => 60, 3 => 65, 4 => 75, 5 => 55, 6 => 50, 7 => 70, 8 => 80, 9 => 60, 11 => 75, 22 => 70],
    2 => [1 => 60, 2 => 75, 3 => 55, 4 => 65, 5 => 70, 6 => 60, 7 => 80, 8 => 50, 9 => 55, 11 => 70, 22 => 65],
    3 => [1 => 65, 2 => 55, 3 => 70, 4 => 60, 5 => 75, 6 => 50, 7 => 55, 8 => 65, 9 => 80, 11 => 60, 22 => 75],
    4 => [1 => 75, 2 => 65, 3 => 60, 4 => 80, 5 => 50, 6 => 70, 7 => 65, 8 => 55, 9 => 45, 11 => 65, 22 => 60],
    5 => [1 => 55, 2 => 70, 3 => 75, 4 => 50, 5 => 70, 6 => 65, 7 => 55, 8 => 60, 9 => 75, 11 => 50, 22 => 80],
    6 => [1 => 50, 2 => 60, 3 => 50, 4 => 70, 5 => 65, 6 => 75, 7 => 60, 8 => 70, 9 => 55, 11 => 75, 22 => 50],
    7 => [1 => 70, 2 => 80, 3 => 55, 4 => 65, 5 => 55, 6 => 60, 7 => 85, 8 => 45, 9 => 50, 11 => 70, 22 => 65],
    8 => [1 => 80, 2 => 50, 3 => 65, 4 => 55, 5 => 60, 6 => 70, 7 => 45, 8 => 75, 9 => 70, 11 => 60, 22 => 75],
    9 => [1 => 60, 2 => 55, 3 => 80, 4 => 45, 5 => 75, 6 => 55, 7 => 50, 8 => 70, 9 => 70, 11 => 75, 22 => 60],
    11 => [1 => 75, 2 => 70, 3 => 60, 4 => 65, 5 => 50, 6 => 75, 7 => 70, 8 => 60, 9 => 75, 11 => 80, 22 => 65],
    22 => [1 => 70, 2 => 65, 3 => 75, 4 => 60, 5 => 80, 6 => 50, 7 => 65, 8 => 75, 9 => 60, 11 => 65, 22 => 85],
];

$relationshipTypes = [
    'romantic' => $romanticCompatibilityMatrix,
    'friendship' => $friendshipCompatibilityMatrix,
    'business' => $businessCompatibilityMatrix,
];

function checkCompatibility($name1, $name2, $relationshipType)
{
    global $relationshipTypes;

    $number1 = calculateNumerologyNumber($name1);
    $number2 = calculateNumerologyNumber($name2);

    $compatibilityMatrix = $relationshipTypes[$relationshipType];

    if (isset($compatibilityMatrix[$number1][$number2])) {
        return $compatibilityMatrix[$number1][$number2];
    } else {
        // Handle error or return a default value
        return null;
    }
}

function checkCompatibility1($name1, $name2, $compatibilityMatrix)
{
    $number1 = calculateNumerologyNumber($name1);
    $number2 = calculateNumerologyNumber($name2);

    if (isset($compatibilityMatrix[$number1][$number2])) {
        return $compatibilityMatrix[$number1][$number2];
    } else {
        // Handle error or return a default value
        return null;
    }
}

function checkCompatibility2($name1, $name2, $birthdate1, $birthdate2, $relationshipType)
{
    global $relationshipTypes;

    $number1 = calculateNumerologyNumber($name1) + calculateLifePathNumber($birthdate1);
    $number2 = calculateNumerologyNumber($name2) + calculateLifePathNumber($birthdate2);

    // Optionally include Expression and Soul Urge numbers:
    $number1 += calculateExpressionNumber($name1) + calculateSoulUrgeNumber($name1);
    $number2 += calculateExpressionNumber($name2) + calculateSoulUrgeNumber($name2);

    $compatibilityMatrix = $relationshipTypes[$relationshipType];

    if (isset($compatibilityMatrix[$number1][$number2])) {
        return $compatibilityMatrix[$number1][$number2];
    } else {
        // Handle error or return a default value
        return null;
    }
}

function calculateLifePathNumber($birthdate)
{
    // Ensure the birthdate is in the format "YYYY-MM-DD"
    $parts = explode('-', $birthdate);
    if (count($parts) != 3 || !checkdate((int)$parts[1], (int)$parts[2], (int)$parts[0])) {
        return null; // Return null if the date is not valid
    }

    // Sum the digits of the day, month, and year
    $sum = array_sum(str_split($parts[0])) + array_sum(str_split($parts[1])) + array_sum(str_split($parts[2]));

    // Reduce the sum to a single digit or master number (11, 22)
    while ($sum > 9 && $sum != 11 && $sum != 22) {
        $sum = array_sum(str_split((string) $sum));
    }

    return $sum;
}



function calculateExpressionNumber($name)
{
    $lettersToNumbers = [
        'A' => 1, 'B' => 2, 'C' => 3, 'D' => 4, 'E' => 5, 'F' => 6, 'G' => 7, 'H' => 8, 'I' => 9,
        'J' => 1, 'K' => 2, 'L' => 3, 'M' => 4, 'N' => 5, 'O' => 6, 'P' => 7, 'Q' => 8, 'R' => 9,
        'S' => 1, 'T' => 2, 'U' => 3, 'V' => 4, 'W' => 5, 'X' => 6, 'Y' => 7, 'Z' => 8,
    ];
    $sum = 0;
    foreach (str_split(strtoupper($name)) as $letter) {
        if (isset($lettersToNumbers[$letter])) {
            $sum += $lettersToNumbers[$letter];
        }
    }
    while ($sum > 9 && $sum != 11 && $sum != 22) {
        $sum = array_sum(str_split((string) $sum));
    }
    return $sum;
}

function calculateSoulUrgeNumber($name)
{
    $lettersToNumbers = [
        'A' => 1, 'B' => 2, 'C' => 3, 'D' => 4, 'E' => 5, 'F' => 6, 'G' => 7, 'H' => 8, 'I' => 9,
        'J' => 1, 'K' => 2, 'L' => 3, 'M' => 4, 'N' => 5, 'O' => 6, 'P' => 7, 'Q' => 8, 'R' => 9,
        'S' => 1, 'T' => 2, 'U' => 3, 'V' => 4, 'W' => 5, 'X' => 6, 'Y' => 7, 'Z' => 8,
    ];
    $sum = 0;
    foreach (str_split(strtoupper($name)) as $letter) {
        if (isset($lettersToNumbers[$letter])) {
            $sum += $lettersToNumbers[$letter];
        }
    }
    while ($sum > 9 && $sum != 11 && $sum != 22) {
        $sum = array_sum(str_split((string) $sum));
    }
    return $sum;
}

function calculateNumerologyNumber($name)
{
    $lettersToNumbers = [
        'A' => 1, 'B' => 2, 'C' => 3, 'D' => 4, 'E' => 5, 'F' => 6, 'G' => 7, 'H' => 8, 'I' => 9,
        'J' => 1, 'K' => 2, 'L' => 3, 'M' => 4, 'N' => 5, 'O' => 6, 'P' => 7, 'Q' => 8, 'R' => 9,
        'S' => 1, 'T' => 2, 'U' => 3, 'V' => 4, 'W' => 5, 'X' => 6, 'Y' => 7, 'Z' => 8,
    ];
    $sum = 0;
    foreach (str_split(strtoupper($name)) as $letter) {
        if (isset($lettersToNumbers[$letter])) {
            $sum += $lettersToNumbers[$letter];
        }
    }
    while ($sum > 9 && $sum != 11 && $sum != 22) {
        $sum = array_sum(str_split((string) $sum));
    }
    return $sum;
}


$name1 = "Alice";
$name2 = "Bob";
$relationshipType = "romantic";
$compatibility = checkCompatibility($name1, $name2, $relationshipType);
echo "Romantic compatibility between $name1 and $name2 is $compatibility%"; // Output based on the defined matrix
